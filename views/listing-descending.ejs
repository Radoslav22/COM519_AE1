<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
  <meta name="description" content="" />
  <title>BMW Filter</title>



  <link rel="canonical" href="https://getbootstrap.com/docs/4.5/examples/album/" />

  <!-- Bootstrap core CSS -->
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
    integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous" />

  <link href="css/album.css" rel="stylesheet" />
  
  <link rel="icon" type="image/png" href="/images/favicon.png" />
</head>

<body>
  <%- include('common/header'); -%>
    <div class="container">
      <% if (message) { %>
        <div class="row justify-content-md-center">
          <div class="alert alert-primary" role="alert">
            <%= message %>
          </div>
        </div>

        <% } %>

        
          
          <div class="row col-md-12 col-md-offset-2 custyle mx-auto">
            <h2 class="mx-auto">BMW Price Challenge</h2>
            <div >
              <a href="/listing-ascending" class="btn btn-success btn-xs"><span class="glyphicon glyphicon-remove"></span>
                Filter by ascending order</a>
              <a href="/listing" class="btn btn-success btn-xs"><span class="glyphicon glyphicon-remove"></span>
                Remove Filter </a>
              <a href="/listing-descending" class="btn btn-success btn-xs"><span class="glyphicon glyphicon-remove"></span>
                Filter by descending order</a>
            </div>
            <table class="table table-striped custab">
              <thead>
                <tr>
                  <th>Maker</th>
                  <th>Model</th>
                  <th>Mileage</th>
                  <th>Engine power</th>
                  <th>Registration Date</th>
                  <th>Type of fuel</th>
                  <th>Paint color</th>
                  <th>Car type</th>
                  <th>Price</th>
                  <th>Sold At</th>
                </tr>

                <% BMWS.forEach(bmw=> { %>
                  
                  <tr>
                    
                    <td>
                      <%= bmw.maker_key %>
                    </td>
                    <td>
                      <%= bmw.model_key %>
                    </td>
                    <td>
                      <%= bmw.mileage %>
                    </td>
                    <td>
                      <%= bmw.engine_power %>
                    </td>
                    <td>
                      <%= bmw.registration_date %>
                    </td>
                    <td>
                      <%= bmw.fuel %>
                    </td>
                    <td>
                      <%= bmw.paint_color %>
                    </td>
                    <td>
                      <%= bmw.car_type %>
                    </td>
                    <td>
                      Â£<%= bmw.price %>
                    </td>
                    <td>
                      <%= bmw.sold_at %>
                    </td>
                    <td>
                      <a href="/update/<%= bmw._id %>" class="btn btn-info btn-xs"><span class="glyphicon glyphicon-remove"></span> Edit</a>
                    </td>
                    <td> 
                      <a  href="/listing/delete/<%= bmw._id %>" class="btn btn-danger btn-xs"><span class="glyphicon glyphicon-remove"></span> Delete</a>
                    </td>   


                      <% }); %>


              </thead>

            </table>
          </div>
          <div class="row col-md-12 col-md-offset-2 custyle mx-auto">



            <nav aria-label="Page navigation example">



              <ul class="pagination">

                <% if (currentPage===1) { %>

                  <li class="page-item disabled"><a class="page-link" href="#">First</a></li>
                  <% } %>
                    <% if (currentPage> 1) { %>
                      <li class="page-item"><a class="page-link" href="/listing-descending">First</a></li>
                      <% } %>

                        <li class="page-item"><a class="page-link"
                            href="/listing-descending?page=<%= currentPage === numberOfPages ? currentPage - 10 :  currentPage + 1 %>">
                            <%= currentPage===numberOfPages ? currentPage - 10 : currentPage + 1 %>
                          </a></li>
                        <li class="page-item"><a class="page-link"
                            href="/listing-descending?page=<%= currentPage === numberOfPages ? currentPage - 9 :  currentPage + 2 %>">
                            <%= currentPage===numberOfPages ? currentPage - 9 : currentPage + 2 %>
                          </a></li>
                        <li class="page-item"><a class="page-link"
                            href="/listing-descending?page=<%= currentPage === numberOfPages ? currentPage - 8 :  currentPage + 3 %>">
                            <%= currentPage===numberOfPages ? currentPage - 8 : currentPage + 3 %>
                          </a></li>
                        <li class="page-item"><a class="page-link"
                            href="/listing-descending?page=<%= currentPage === numberOfPages ? currentPage - 7 :  currentPage + 4 %>">
                            <%= currentPage===numberOfPages ? currentPage - 7 : currentPage + 4 %>
                          </a></li>
                        <li class="page-item"><a class="page-link"
                            href="/listing-descending?page=<%= currentPage === numberOfPages ? currentPage - 6 :  currentPage + 5 %>">
                            <%= currentPage===numberOfPages ? currentPage - 6 : currentPage + 5 %>
                          </a></li>
                        <li class="page-item"><a class="page-link"
                            href="/listing-descending?page=<%= currentPage === numberOfPages ? currentPage - 5 :  currentPage + 6 %>">
                            <%= currentPage===numberOfPages ? currentPage - 5 : currentPage + 6 %>
                          </a></li>
                        <li class="page-item"><a class="page-link"
                            href="/listing-descending?page=<%= currentPage === numberOfPages ? currentPage - 4 :  currentPage + 7 %>">
                            <%= currentPage===numberOfPages ? currentPage - 4 : currentPage + 7 %>
                          </a></li>
                        <li class="page-item"><a class="page-link"
                            href="/listing-descending?page=<%= currentPage === numberOfPages ? currentPage - 3 :  currentPage + 8 %>">
                            <%= currentPage===numberOfPages ? currentPage - 3 : currentPage + 8 %>
                          </a></li>
                        <li class="page-item"><a class="page-link"
                            href="/listing-descending?page=<%= currentPage === numberOfPages ? currentPage - 2 :  currentPage + 9 %>">
                            <%= currentPage===numberOfPages ? currentPage - 2 : currentPage + 9 %>
                          </a></li>
                        <li class="page-item"><a class="page-link"
                            href="/listing-descending?page=<%= currentPage === numberOfPages ? currentPage - 1 :  currentPage + 10 %>">
                            <%= currentPage===numberOfPages ? currentPage - 1 : currentPage + 10 %>
                          </a></li>

                        <% if (currentPage===numberOfPages) { %>

                          <li class="page-item disabled"><a class="page-link" href="/listing-descending">Last</a></li>
                          <% } %>

                            <% if (currentPage < numberOfPages) { %>
                              <li class="page-item"><a class="page-link"
                                  href="/listing-descending?page=<%= numberOfPages %>">Last</a>
                              </li>
                              <% } %>

              </ul>
            </nav>
          </div>


          <!-- PAGINATION ARTICLE: https://evdokimovm.github.io/javascript/nodejs/mongodb/pagination/expressjs/ejs/bootstrap/2017/08/20/create-pagination-with-nodejs-mongodb-express-and-ejs-step-by-step-from-scratch.html-->
          <!--- https://medium.com/swlh/master-ejs-template-engine-with-node-js-and-expressjs-979cc22b69be-->
    </div>
</body>

</html>